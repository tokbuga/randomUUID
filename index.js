const f64 = new Float64Array(2);
const u32 = new Uint32Array(f64.buffer, 0, 1);
const u16 = new Uint16Array(f64.buffer, 4, 3);
const u64 = new BigUint64Array(f64.buffer, 8, 1);

window.turboUUID = () => (
    f64[0] = Math.random(),
    f64[1] = Math.random()) && (
        u32[0].toString(16).padEnd(8, 0).concat("-")
            .concat(u16[0].toString(16).padEnd(4, 0)).concat("-")
            .concat(u16[1].toString(16).padEnd(4, 0)).concat("-")
            .concat(u16[2].toString(16).padEnd(4, 0)).concat("-")
            .concat(u64[0].toString(16).substring(4)).padEnd(36, 0)
    );

turboUUID.benchmark = (count = 1e6) => {
    let t0, tLen, dt;
    console.warn(`benchmark started to generation ${count} UUID strings.`);

    tLen = count;
    t0 = performance.now();
    while (tLen--) crypto.randomUUID();
    dt = performance.now() - t0;
    console.log("crypto.randomUUID:\t", dt, "ms sample:", crypto.randomUUID());
    //crypto.randomUUID: 1176.0499997138977 ms sample: 045989d4-e3b6-4ebc-99f4-4649c9c9ccea

    tLen = count;
    t0 = performance.now();
    while (tLen--) window.turboUUID();
    dt = performance.now() - t0;
    console.log("window.turboUUID:\t", dt, "ms sample:", window.turboUUID());
    //window.turboUUID: 404.78500032424927 ms sample: 853dcff4-2729-3fd6-fe00-36efc5920fe0
};

turboUUID.base = async () => {
    const wasm = Uint8Array.from(`0061736d0100000001a6011e6000017c6000016f60017f016f60016f017e60016f017f60027f7f016f60016f016f60036f7f7f0060036f7f7f016f60036f7f6f0060026f6f016f60036f6f6f0060036f7f6f016f60036f7e6f016f60036f6f6f016f60056f6f6f6f6f016f60026f6f0060027f7f0060017f017f60016f0060026f7f006000017f60017b017f60027f7b0060026f7f016f60027e7f016f60000060026f6f017e60026f6f017f60016f017b029c02140473656c660473656c66036f00044d6174680672616e646f6d00000473656c66054172726179000106537472696e670c66726f6d43686172436f6465036f00054172726179026f6600020473656c6606426967496e7400030473656c66064e756d6265720004054172726179026f660005054172726179026f660006075265666c656374037365740007054172726179026f660008075265666c656374037365740009054172726179026f66000a075265666c65637403676574000a075265666c656374056170706c79000b075265666c656374056170706c79000c075265666c656374056170706c79000d075265666c65637409636f6e737472756374000a075265666c656374056170706c79000e054172726179026f66000f031e1d10111213140212040415040216151617180605191a0a0a1b1c1d15151a0404016f001b052b07030101038827ffff03038827ffff0303904effff0303a09c01ffff0303c0b802ffff0303a09c01ffff03063e0c7f0041240b7f00412c0b7f0041300b7f0041c0000b6f01d06f0b6f01d06f0b6f01d06f0b6f01d06f0b6f01d06f0b6f01d06f0b6f01d06f0b6f01d06f0b07570906757569644174001d0776616c75654f66001a07696e6465784f66001c0873657456616c7565001603686173001905636f756e74001b07666f724561636800120672656d6f766500150a72616e646f6d55554944001708012e0904010300000c01010ae3211d5401027bfd0cffffffff04000000010000000000000021022003101bfd1c00210303402003fd1b000440200020012003fd1b02101d2003fd1b01284206002003fd1b021008100c20032002fdae0121030c010b0b0b0d00410420006c2001364206000b0b00410420006c284206000b2d01017f417f2000101c22014604400f0b2001fd0c0000000000000000000000000000000010212001410010130b2802017f017b2000102b21032003101e2102417f2002460440102c2202200310210b2002200110130b080020001018101d0b0e01017f101f22012000101320010b0900417f2000101c470b1701017f417f2000101c220147047f200110140541000b0b070023022802000b08002000102b101e0b6801017bfd0c010000000200000004000000080000002000fd11fdb50121012001fd1b002d400100410210242001fd1b002d400200410210242001fd1b012f410300410410242001fd1b0228420400410810242001fd1b03294305004110102510111023230c10280b360023042000fd16003a000023042000fd16013a000123042000fd19013b010223042000fd1b0136020423042000fd1d01370308102d0b180023051000390300230510003903082305fd00040010200b0e01017f102c22012000102120010b6501017bfd0c010000000200000004000000080000002000fd11fdb50121022002fd1b002001fd16003a4001002002fd1b002001fd16013a4002002002fd1b012001fd19013b4103002002fd1b022001fd1b01364204002002fd1b032001fd1d01374305000b100041102500200020014100100510100b1400410f250020002301230023001010100610100b1200410e2500200041101002100d200110220b1200410d2500200041101002100e200110220b68002302410036020023034101360200410a250023012300230010101027240641092500410425001027240741082500410425001027240841072500410425001027240941062500410425001027240a41052500410425001027240b41032500410225001027240c0b1400410c2500200041012500100a100f2001100a0b0c00410b25002000200110100b0a0020002001102810030b0a0020002001102810040b4501017b2000230610282100200120002307102afd1700220120002308102afd1701220120002309102afd1a0122012000230a102afd1c0122012000230b1029fd1e0122010b2001017f23024101fe1e02002200200041107045044023034101fe1e02001a0b0b9a0503017f057b067f23042d000021002304fd07000121012304fd08010221022304fd09020421032304fd0a030821044100210a2303280200210b0340200b0440fd0c10000000200000004000000080000000200afd11fdb50121052005fd1b0021062005fd1b0121072005fd1b0221082005fd1b032109200a41016a210a200b41016b210b20012006fd00440200fd24fd630d0120022007fd00440300fd51fd53044020032008fd00440400fd51fd53044020042009fd00440500fd51fd53044020062d4001002000460440200641006a0f0b200020062d400101460440200641016a0f0b0b20042009fd00440510fd51fd530440200020062d400102460440200641026a0f0b200020062d400103460440200641036a0f0b0b0b20032008fd00440410fd51fd53044020042009fd00440520fd51fd530440200020062d400104460440200641046a0f0b200020062d400105460440200641056a0f0b0b20042009fd00440530fd51fd530440200020062d400106460440200641066a0f0b200020062d400107460440200641076a0f0b0b0b0b20022007fd00440310fd51fd53044020032008fd00440420fd51fd53044020042009fd00440540fd51fd530440200020062d400108460440200641086a0f0b200020062d400109460440200641096a0f0b0b20042009fd00440550fd51fd530440200020062d40010a4604402006410a6a0f0b200020062d40010b4604402006410b6a0f0b0b0b20032008fd00440430fd51fd53044020042009fd00440560fd51fd530440200020062d40010c4604402006410c6a0f0b200020062d40010d4604402006410d6a0f0b0b20042009fd00440570fd51fd530440200020062d40010e4604402006410e6a0f0b200020062d40010f4604402006410f6a0f0b0b0b0b0c010b0b417f0bb11502056f037f02402300026f1001240d230d410041d4001007230d410141e5001007230d410241f8001007230d410341f4001007230d410441c4001007230d410541e5001007230d410641e3001007230d410741ef001007230d410841e4001007230d410941e5001007230d410a41f20010072301d06f230d1010d06f240d0b100b2300100f21002000026f1001240d230d410041e4001007230d410141e5001007230d410241e3001007230d410341ef001007230d410441e4001007230d410541e50010072301d06f230d1010d06f240d0b100b21012300026f1001240d230d410041d5001007230d410141e9001007230d410241ee001007230d410341f4001007230d410441381007230d410541c1001007230d410641f2001007230d410741f2001007230d410841e1001007230d410941f90010072301d06f230d1010d06f240d0b100b21020b410041002802000240024041002105410421064102210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094101200120002003101026000b02404100210541062106410e210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094102200120002003101026000b0240410021054114210641c400210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094103200120002003101026000b02404100210541d80021064104210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094104200120002003101026000b02404100210541dc002106412c210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094105200120002003101026000b0240410021054188012106412c210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094106200120002003101026000b02404100210541b4012106412c210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094107200120002003101026000b02404100210541e0012106412c210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094108200120002003101026000b024041002105418c022106412c210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094109200120002003101026000b02404100210541b80221064109210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b100121032003410020041009410a200120002003101026000b02404100210541c10221064108210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094111200120002003101026000b02404100210541c90221064109210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094112200120002003101026000b02404100210541d20221064106210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094113200120002003101026000b02404100210541d80221064104210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094114200120002003101026000b02404100210541dc0221064105210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094115200120002003101026000b02404100210541e10221064108210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094116200120002003101026000b02404100210541e90221064106210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094117200120002003101026000b02404100210541ef0221064106210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094118200120002003101026000b02404100210541f50221064106210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b1001210320034100200410094119200120002003101026000b02404100210541fb0221064107210710012103200341002007100720022003100f2104034020070440410020064101fc0800002004200541002d00001007200541016a2105200641016a2106200741016b21070c010b0b100121032003410020041009411a200120002003101026000b0b02400240410b230041132500100b41122500100b411a2500100b26000b0240410c230041192500100b26000b0240410d230041182500100b41122500100b41162500100b26000b0240410e230041172500100b41122500100b41162500100b26000b0240410f230041152500100b41122500100b41142500100b26000b02404110230041132500100b41122500100b41112500100b26000b0b3602000110260b0b86030101820382010000676924312d24322d24332d24342d24355e285b612d66302d395d7b387d29285b612d66302d395d7b347d29285b612d66302d395d7b347d29285b612d66302d395d7b347d29285b612d66302d395d7b31327d292430782431283f3a5b612d66302d395d7b31367d29285b612d66302d395d7b31367d29285b612d66302d395d7b307d3f29283f3a5b612d66302d395d7b387d29285b612d66302d395d7b387d29283f3a5b612d66302d395d7b31367d29283f3a5b612d66302d395d7b347d29285b612d66302d395d7b347d29283f3a5b612d66302d395d7b32347d29283f3a5b612d66302d395d7b327d29285b612d66302d395d7b327d29283f3a5b612d66302d395d7b32387d29283f3a5b612d66302d395d7b307d29285b612d66302d395d7b327d29283f3a5b612d66302d395d7b33307d295b5e612d66302d395d706164537461727470726f746f74797065537472696e676a6f696e4172726179746f537472696e674e756d626572426967496e745265674578707265706c616365`.match(/../g), $ => parseInt($, 16));
    return WebAssembly.instantiate(wasm, self).then(i => i.instance.exports);
}
